global:
    defaultStorageClass: nfs-client
notifications:
    enabled: true
server:
    config:
        kustomize.buildOptions: --enable-alpha-plugins --enable-exec
    ingress:
        enabled: true
        hostname: argocd.comintern.local
        ## e.g:
        ## annotations:
        ##   kubernetes.io/ingress.class: nginx
        ##   cert-manager.io/cluster-issuer: cluster-issuer-name
        ##
        annotations:
            kubernetes.io/ingress.class: nginx
            cert-manager.io/cluster-issuer: selfsigned-issuer
            nginx.ingress.kubernetes.io/backend-protocol: HTTPS
            nginx.ingress.kubernetes.io/ssl-redirect: "true"
            nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
        ## Enable TLS configuration for the hostname defined at ingress.hostname parameter
        ## TLS certificates will be retrieved from a TLS secret with name: {{- printf "%s-tls" .Values.ingress.hostname }}
        ## You can use the ingress.secrets parameter to create this TLS secret or rely on cert-manager to create it
        ##
        tls: false
        ## This is supported in Kubernetes 1.18+ and required if you have more than one IngressClass marked as the default for your cluster .
        ## ref: https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/
        ##
        ingressClassName: nginx
dex:
    enabled: false
config:
    ## @param config.knownHosts [string] Known hosts to be added to the known hosts list by default. Check the values to see the default value
    ##
    knownHosts: |
        bitbucket.org ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAubiN81eDcafrgMeLzaFPsw2kNvEcqTKl/VqLat/MaB33pZy0y3rJZtnqwR2qOOvbwKZYKiEO1O6VqNEBxKvJJelCq0dTXWT5pbO2gDXC6h6QDXCaHo6pOHGPUy+YBaGQRGuSusMEASYiWunYN0vCAI8QaXnWMXNMdFP3jHAJH0eDsoiGnLPBlBp4TNm6rYI74nMzgz3B9IikW4WVK+dc8KZJZWYjAuORU3jc1c/NPskD2ASinf8v3xnfXeukU0sJ5N6m5E8VLjObPEO+mN2t/FZTMZLiFqPWc/ALSqnMnnhwrNi2rbfg/rd/IpL8Le3pSBne8+seeFVBoGqzHM9yXw==
        github.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==
        gitlab.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFSMqzJeV9rUzU4kWitGjeR4PWSa29SPqJ1fVkhtj3Hw9xjLVXVYrU9QlYWrOLXBpQ6KWjbjTDTdDkoohFzgbEY=
        gitlab.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAfuCHKVTjquxvt6CM6tdG4SLp1Btn/nOeHHE5UOzRdf
        gitlab.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsj2bNKTBSpIYDEGk9KxsGh3mySTRgMtXL583qmBpzeQ+jqCMRgBqB98u3z++J1sKlXHWfM9dyhSevkMwSbhoR8XIq/U0tCNyokEi/ueaBMCvbcTHhO7FcwzY92WK4Yt0aGROY5qX2UKSeOvuP4D6TPqKF1onrSzH9bx9XUf2lEdWT/ia1NEKjunUqu1xOB/StKDHMoX4/OKyIzuS0q/T1zOATthvasJFoPrAjkohTyaDUz2LN5JoH839hViyEG82yB+MjcFV5MU3N1l1QL3cVUCh93xSaua1N85qivl+siMkPGbO5xR/En4iEY6K2XPASUEMaieWVNTRCtJ4S8H+9
        ssh.dev.azure.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC7Hr1oTWqNqOlzGJOfGJ4NakVyIzf1rXYd4d7wo6jBlkLvCA4odBlL0mDUyZ0/QUfTTqeu+tm22gOsv+VrVTMk6vwRU75gY/y9ut5Mb3bR5BV58dKXyq9A9UeB5Cakehn5Zgm6x1mKoVyf+FFn26iYqXJRgzIZZcZ5V6hrE0Qg39kZm4az48o0AUbf6Sp4SLdvnuMa2sVNwHBboS7EJkm57XQPVU3/QpyNLHbWDdzwtrlS+ez30S3AdYhLKEOxAG8weOnyrtLJAUen9mTkol8oII1edf7mWWbWVf0nBmly21+nZcmCTISQBtdcyPaEno7fFQMDD26/s0lfKob4Kw8H
        vs-ssh.visualstudio.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC7Hr1oTWqNqOlzGJOfGJ4NakVyIzf1rXYd4d7wo6jBlkLvCA4odBlL0mDUyZ0/QUfTTqeu+tm22gOsv+VrVTMk6vwRU75gY/y9ut5Mb3bR5BV58dKXyq9A9UeB5Cakehn5Zgm6x1mKoVyf+FFn26iYqXJRgzIZZcZ5V6hrE0Qg39kZm4az48o0AUbf6Sp4SLdvnuMa2sVNwHBboS7EJkm57XQPVU3/QpyNLHbWDdzwtrlS+ez30S3AdYhLKEOxAG8weOnyrtLJAUen9mTkol8oII1edf7mWWbWVf0nBmly21+nZcmCTISQBtdcyPaEno7fFQMDD26/s0lfKob4Kw8H
    ## @param config.tlsCerts TLS certificates used to verify the authenticity of the repository servers
    ## Certificates will be generated by default if the values are not set.
    ## E.g:
    ## tlsCerts:
    ##   argocd-1.example.com: |
    ##     -----BEGIN CERTIFICATE-----
    ##     (...)
    ##     -----END CERTIFICATE-----
    ##   argocd-2.example.com: |
    ##     -----BEGIN CERTIFICATE-----
    ##     (...)
    ##     -----END CERTIFICATE-----
    ##
    tlsCerts: {}
    ## @param config.gpgKeys GnuPG public keys to add to the keyring
    ## Keys will be generated by default if the values are not set.
    ## Note: Public keys should be exported with `gpg --export --armor <KEY>`
    ##
    gpgKeys: {}
    # 4AEE18F83AFDEB23: |
    #   -----BEGIN PGP PUBLIC KEY BLOCK-----
    #   ...
    #   -----END PGP PUBLIC KEY BLOCK-----
    secret:
        ## @param config.secret.create Whether to create or not the secret
        ##
        create: true
        ## Annotations to be added to argocd-secret
        ## @param config.secret.annotations General secret extra annotations
        ##
        annotations: {}
        ## Webhook Configs
        ## @param config.secret.githubSecret GitHub secret to configure webhooks
        ## @param config.secret.gitlabSecret GitLab secret to configure webhooks
        ## @param config.secret.bitbucketServerSecret BitBucket secret to configure webhooks
        ## @param config.secret.bitbucketUUID BitBucket UUID to configure webhooks
        ## @param config.secret.gogsSecret Gogs secret to configure webhooks
        ##
        githubSecret: ""
        gitlabSecret: ""
        bitbucketServerSecret: ""
        bitbucketUUID: ""
        gogsSecret: ""
        ## Extra keys to add to the general config secret. Useful for injecting SSO secrets into environment variables.
        ## Ref: https://argo-cd.readthedocs.io/en/stable/operator-manual/user-management/#sso
        ## @param config.secret.extra Extra keys to add to the configuration secret.
        ## All values must be non-empty.
        ## E.g:
        ##  LDAP_PASSWORD: "mypassword"
        ##
        extra: {}
        ## Argo CD TLS Data.
        ## @param config.secret.argocdServerTlsConfig.key TLS key for the Argo CD config secret
        ## @param config.secret.argocdServerTlsConfig.crt TLS certificate for the Argo CD config secret
        ## E.g:
        ##   key:
        ##   crt: |
        ##     -----BEGIN CERTIFICATE-----
        ##     <cert data>
        ##     -----END CERTIFICATE-----
        ##     -----BEGIN CERTIFICATE-----
        ##     <ca cert data>
        ##     -----END CERTIFICATE-----
        ##
        argocdServerTlsConfig:
            key: ""
            crt: ""
        ## Argo admin password
        ## @param config.secret.argocdServerAdminPassword Argo CD server admin password. Autogenerated by default.
        ##
        argocdServerAdminPassword: ""
        ## Password modification time defaults to current time if not set
        ## @param config.secret.argocdServerAdminPasswordMtime Argo CD server password modification time
        ## E.g:
        ## argocdServerAdminPasswordMtime: "2006-01-02T15:04:05Z"
        ##
        argocdServerAdminPasswordMtime: ""
        ## Create a secret with optional repository credentials
        ## @param config.secret.repositoryCredentials Repository credentials to add to the Argo CD server confgi secret
        ## E.g.
        ## repositoryCredentials:
        ##   sample-ssh-key: |
        ##     -----BEGIN RSA KEY-----
        ##     <key content>
        ##     -----END RSA KEY-----
        ##
        repositoryCredentials: {}
        ## External Cluster Credentials
        ## Refs:
        ## - https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#clusters
        ## - https://argo-cd.readthedocs.io/en/stable/operator-manual/security/#external-cluster-credentials
        ## @param config.clusterCredentials Configure external cluster credentials
        ## E.g
        ##  - name: mycluster
        ##   server: https://mycluster.com
        ##   labels: {}
        ##   annotations: {}
        ##   config:
        ##     bearerToken: "<authentication token>"
        ##     tlsClientConfig:
        ##       insecure: false
        ##       caData: "<base64 encoded certificate>"
        ## - name: mycluster2
        ##   server: https://mycluster2.com
        ##   labels: {}
        ##   annotations: {}
        ##   namespaces: namespace1,namespace2
        ##   config:
        ##     bearerToken: "<authentication token>"
        ##     tlsClientConfig:
        ##       insecure: false
        ##       caData: "<base64 encoded certificate>"
        ##
        clusterCredentials: []
redis:
    enabled: false
externalRedis:
    ## Can be enabled after redisWait.enabled and redis.enabled are set to false
    ## @param externalRedis.enabled Enables External Redis
    ##
    enabled: true
    ## Redis&reg; host
    ## @param externalRedis.host External Redis host
    ##
    host: redis-master
    ## Redis&reg; port
    ## @param externalRedis.port External Redis port
    ##
    port: 6379
    ## Redis&reg; password for authentication
    ## Ignored if existingSecret is set
    ## @param externalRedis.password External Redis password
    ##
    password: ""
    # password: "superSecretP@ss123"
    ## Name of existing secret object containing the password
    ## @param externalRedis.existingSecret Existing secret for the external redis
    ##
    existingSecret: ENC[AES256_GCM,data:xF8hmTCls11hng==,iv:4xnSzwyw2OpmoNwTynWN5n0OvwZZhiypw111HO/lPvs=,tag:9aMqwrKzkXzaPH2m0AeugA==,type:str]
    # existingSecret: ""
    ## Password key to be retrieved from Redis&reg; secret
    ## @param externalRedis.existingSecretPasswordKey Password key for the existing secret containing the external redis password
    ##
    existingSecretPasswordKey: ENC[AES256_GCM,data:xr3b8kBWplrLLfNuPyk=,iv:4EWzXJ5eBTGdSOTQRvz/GiY+EOgW6ggfuwSnVaGiz1Q=,tag:6hlLt08chZBAbNcALW0mBA==,type:str]
    # existingSecretPasswordKey: ""
    ## Specify a label to use with the label selector
    ## @param externalRedis.selector External Redis selector labels
    ##
    selector: {}
    #
    # selector:
    # app.kubernetes.io/component: master
    # app.kubernetes.io/instance: redis
    # app.kubernetes.io/name: redis
redisWait:
    ## @param redisWait.enabled Enables waiting for redis
    ##
    enabled: false
repoServer:
    # Use init containers to configure custom tooling
    # https://argoproj.github.io/argo-cd/operator-manual/custom_tools/
    env:
        - name: HELM_PLUGINS
          value: /gitops-tools/helm-plugins/
        - name: HELM_SECRETS_CURL_PATH
          value: /gitops-tools/curl
        - name: HELM_SECRETS_SOPS_PATH
          value: /gitops-tools/sops
        - name: HELM_SECRETS_VALS_PATH
          value: /gitops-tools/vals
        - name: HELM_SECRETS_AGE_PATH
          value: /gitops-tools/age
        - name: HELM_SECRETS_KUBECTL_PATH
          value: /gitops-tools/kubectl
        - name: HELM_SECRETS_BACKEND
          value: sops
        # https://github.com/jkroepke/helm-secrets/wiki/Security-in-shared-environments
        # https://github.com/jkroepke/helm-secrets/wiki/Security-in-shared-environments
        - name: HELM_SECRETS_VALUES_ALLOW_SYMLINKS
          value: "false"
        - name: HELM_SECRETS_VALUES_ALLOW_ABSOLUTE_PATH
          value: "true"
        - name: HELM_SECRETS_VALUES_ALLOW_PATH_TRAVERSAL
          value: "false"
        - name: HELM_SECRETS_WRAPPER_ENABLED
          value: "true"
        - name: HELM_SECRETS_DECRYPT_SECRETS_IN_TMP_DIR
          value: "true"
        - name: HELM_SECRETS_HELM_PATH
          value: /usr/local/bin/helm
        - name: HELM_SECRETS_LOAD_GPG_KEYS
          # Multiple keys can be separated by space
          value: /helm-secrets-private-keys/key.asc
    extraVolumes:
        - name: custom-tools
          emptyDir: {}
        - name: gitops-tools
          emptyDir: {}
          # kubectl create secret generic helm-secrets-private-keys --from-file=key.asc=assets/gpg/private2.gpg
    # - name: helm-secrets-private-keys
    #   secret:
    #       secretName: helm-secrets-private-keys
    initContainers:
        - name: install-ksops
          image: viaductoss/ksops:v4
          command:
            - /bin/sh
            - -c
          args:
            - echo "Installing KSOPS..."; mv ksops /custom-tools/; mv kustomize /custom-tools/; echo "Done.";
          volumeMounts:
            - mountPath: /custom-tools
              name: custom-tools
        - name: download-tools
          image: alpine:latest
          imagePullPolicy: IfNotPresent
          command:
            - sh
            - -euc
          env:
            - name: HELM_SECRETS_VERSION
              value: 4.6.11
            - name: KUBECTL_VERSION
              value: 1.34.1
            - name: VALS_VERSION
              value: 0.42.4
            - name: SOPS_VERSION
              value: 3.11.0
            - name: AGE_VERSION
              value: 1.2.1
            - name: HELM_PLUGINS
              value: /gitops-tools/helm-plugins/
            - name: HELM_SECRETS_CURL_PATH
              value: /gitops-tools/curl
            - name: HELM_SECRETS_SOPS_PATH
              value: /gitops-tools/sops
            - name: HELM_SECRETS_VALS_PATH
              value: /gitops-tools/vals
            - name: HELM_SECRETS_AGE_PATH
              value: /gitops-tools/age
            - name: HELM_SECRETS_KUBECTL_PATH
              value: /gitops-tools/kubectl
          args:
            - |
              mkdir -p "${HELM_PLUGINS}"
              export CURL_ARCH=$(uname -m | sed -e 's/x86_64/amd64/')
              wget -qO "${HELM_SECRETS_CURL_PATH}" https://github.com/moparisthebest/static-curl/releases/latest/download/curl-${CURL_ARCH}
              export GO_ARCH=$(uname -m | sed -e 's/x86_64/amd64/' -e 's/\(arm\)\(64\)\?.*/\1\2/' -e 's/aarch64$/arm64/')
              wget -qO "${HELM_SECRETS_KUBECTL_PATH}" https://dl.k8s.io/release/v${KUBECTL_VERSION}/bin/linux/${GO_ARCH}/kubectl
              wget -qO "${HELM_SECRETS_SOPS_PATH}" https://github.com/getsops/sops/releases/download/v${SOPS_VERSION}/sops-v${SOPS_VERSION}.linux.${GO_ARCH}
              wget -qO- https://github.com/helmfile/vals/releases/download/v${VALS_VERSION}/vals_${VALS_VERSION}_linux_${GO_ARCH}.tar.gz | tar zxv -C "${HELM_SECRETS_VALS_PATH%/*}" vals
              wget -qO- https://github.com/jkroepke/helm-secrets/releases/download/v${HELM_SECRETS_VERSION}/helm-secrets.tar.gz | tar -C "${HELM_PLUGINS}" -xzf-
              wget -qO- "https://github.com/FiloSottile/age/releases/download/v${AGE_VERSION}/age-v${AGE_VERSION}-linux-amd64.tar.gz" | tar -xzf- --strip-components=1 -C "${HELM_SECRETS_AGE_PATH%/*}" age/age

              chmod +x \
                  "${HELM_SECRETS_CURL_PATH}" \
                  "${HELM_SECRETS_SOPS_PATH}" \
                  "${HELM_SECRETS_KUBECTL_PATH}" \
                  "${HELM_SECRETS_VALS_PATH}" \
                  "${HELM_SECRETS_AGE_PATH}"

              cp "${HELM_PLUGINS}/helm-secrets/scripts/wrapper/helm.sh" /gitops-tools/helm
          volumeMounts:
            - mountPath: /gitops-tools
              name: gitops-tools
    extraVolumeMounts:
        - mountPath: /usr/local/bin/kustomize
          name: custom-tools
          subPath: kustomize
        - mountPath: /usr/local/bin/ksops
          name: custom-tools
          subPath: ksops
        - name: gitops-tools
          emptyDir: {}
          # kubectl create secret generic helm-secrets-private-keys --from-file=key.asc=assets/gpg/private2.gpg
    # - name: helm-secrets-private-keys
    #   secret:
    #       secretName: helm-secrets-private-keys
    extraEnvVarsSecret: ENC[AES256_GCM,data:OWE6P6myADOp9/Dg,iv:OzA3iRGvJ2qB7shk9GmNnuptaMMIx7DAAcwvHaaqDg8=,tag:8QIxGjbs/uZokr106sYs7g==,type:str]
    resourcesPreset: small
controller:
    resourcesPreset: small
configs:
    cm:
        helm.valuesFileSchemes: secrets+gpg-import, secrets+gpg-import-kubernetes, secrets+age-import, secrets+age-import-kubernetes, secrets, secrets+literal, https
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBsMU43S0svdVdzRU5oYnA0
            R1hxZ1JsRnY1b1ZZZ0lkankyRzB5NXBDRVdJCjBQNHJMRmJGNHcra0xaZEdzTGRk
            a1dMTUtLWWcrOHMrT2F5Zkd5eGZnWU0KLS0tIHcwUWNpVHNMYXZ4ZmZ3NkUyNksw
            M3dvVUQvQ2M2aUNJMzNkNXl4SlRSS3MKIfN1Nql6xZGxfxKY12i3L4AqYMDpq5jo
            boBuwkWuu0zWCKJNP94WpUrCFIH1+HCx5RELJ0kda0jcWZjnaHTt8A==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-10-24T16:45:53Z"
    mac: ENC[AES256_GCM,data:usjadjRMGtzqjYnmE0+F5PqN43SRVYO98V/5ypGLikKdxs+m1Tdc7bBRfgCMy/AxcwVDeGpMIaAb8yLMfAcv7unHQkgD6qBtohkVa79H5orNY18hEsfHkGSljDg8XMU4tjdVG3y0ZXZLf2gw1nCG2zT4lMBnRU1graMID9o1ICw=,iv:WOh5lormrEcQNklBgX7ymX2PEDvKtAdQZdikN1fmWR8=,tag:ZwWnTyceimdvC9gQbiJLuQ==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token|unseal_keys.*|vault-init.yaml)$
    version: 3.7.1
