apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
    name: selfsigned-issuer
spec:
    selfSigned: {}
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: v1
kind: Namespace
metadata:
    name: cert-comintern
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
    name: comintern-cert
    namespace: cert-comintern
spec:
    secretName: comintern-cert-tls
    # 1 year
    duration: 8760h
    # 15 days
    renewBefore: 360h
    subject:
        organizations:
            - Comintern
    commonName: comintern.local
    dnsNames:
        - comintern.local
        - '*.comintern.local'
    issuerRef:
        name: selfsigned-issuer
        kind: ClusterIssuer
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: v1
kind: PersistentVolume
metadata:
    name: cert-nfs-pv
spec:
    capacity:
        storage: 1Gi
    accessModes:
        - ReadWriteMany
    persistentVolumeReclaimPolicy: Retain
    nfs:
        server: nas.comintern.local
        path: /mnt/trash_pool/misc/certs
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    name: cert-nfs-pvc
    namespace: cert-comintern
spec:
    accessModes:
        - ReadWriteMany
    resources:
        requests:
            storage: 1Gi
    volumeName: cert-nfs-pv
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: batch/v1
kind: CronJob
metadata:
    name: sync-cert-to-nfs
    namespace: cert-comintern
spec:
    # each 30 min
    schedule: '*/30 * * * *'
    jobTemplate:
        spec:
            template:
                spec:
                    restartPolicy: OnFailure
                    volumes:
                        - name: cert-secret
                          secret:
                            secretName: comintern-cert-tls
                        - name: cert-nfs
                          persistentVolumeClaim:
                            claimName: cert-nfs-pvc
                    containers:
                        - name: sync
                          image: busybox
                          command:
                            - /bin/sh
                            - -c
                          args:
                            - mkdir -p /nfs/comintern.local/ && cp /cert/tls.crt /nfs/comintern.local/comintern.crt && cp /cert/tls.key /nfs/comintern.local/comintern.key
                          volumeMounts:
                            - mountPath: /cert
                              name: cert-secret
                              readOnly: true
                            - mountPath: /nfs
                              name: cert-nfs
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: v1
kind: Secret
metadata:
    name: digitalocean-dns
    namespace: cert-manager
type: Opaque
stringData:
    access-token: ENC[AES256_GCM,data:L5ZeIHGHklnrQcLZwv0z4mNAoHaXoxdZpxSDDGOe5wDAQwI5EaTXadZGYHONF4nsBmSW6NZLUa9X/PyuyyKBcoqPVWyjzP8=,iv:VtY+O+QLcX+PdJLyA+GIJe1DrV/4Tt+KIrHiX0OygE8=,tag:DOqUm3VRyeJyJQYc58iaTg==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: v1
kind: Namespace
metadata:
    name: cert-srvx-cc
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
    name: letsencrypt-dns
spec:
    acme:
        email: ENC[AES256_GCM,data:TvzXrucYRoEsWGtGhgBQ/eM=,iv:7JBFKRwTrXqJTYzlwGRHF/pklfiTJT2+ZSxQQKZXGjA=,tag:aMbIWHx8Wia3S81KJRAJWw==,type:str]
        server: https://acme-v02.api.letsencrypt.org/directory
        privateKeySecretRef:
            name: ENC[AES256_GCM,data:KRQRKRFa9pMtBnQE2yR2CrcHlw==,iv:CTibiZas5QOwSQi3PII2OTp/jaXMbjrh9dCs5WaS0XI=,tag:IHvdjhXTLuC7in4EbJ8ceQ==,type:str]
        solvers:
            - dns01:
                digitalocean:
                    tokenSecretRef:
                        name: ENC[AES256_GCM,data:AmWXkZLHwpI6iXTi0WDEaw==,iv:MpFPAVatp/+nkB1wEVGjmUt3EyAJ9QnREWeZOnyM2no=,tag:ORTzw38zTXqaIbDaOQ1ClQ==,type:str]
                        key: ENC[AES256_GCM,data:E3Y+yW3y23vwPIl7,iv:WBd/5o5XI4s+HpE0s6QdVM6QEgCxeECf9aOBZlwSC3k=,tag:2z3ggE3JRQsXJI/jUWuPGA==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
    name: srvx-cc-wildcard
    namespace: cert-srvx-cc
spec:
    secretName: srvx-cc-tls
    issuerRef:
        name: letsencrypt-dns
        kind: ClusterIssuer
    commonName: '*.srvx.cc'
    dnsNames:
        - '*.srvx.cc'
        - srvx.cc
    privateKey:
        algorithm: RSA
        size: 2048
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
    name: cert-manager-rules
    namespace: cert-manager
    labels:
        release: prometheus
spec:
    groups:
        - name: cert-manager.rules
          rules:
            - alert: CertificateExpiringSoon
              expr: (certmanager_certificate_expiration_timestamp_seconds - time()) < 86400 * 7
              for: 10m
              labels:
                severity: warning
              annotations:
                summary: Certificate {{ $labels.name }} is expiring soon
                description: Certificate {{ $labels.name }} in namespace {{ $labels.namespace }} will expire in less than 7 days.
            - alert: CertificateExpired
              expr: (certmanager_certificate_expiration_timestamp_seconds - time()) < 0
              for: 10m
              labels:
                severity: critical
              annotations:
                summary: Certificate {{ $labels.name }} has expired
                description: Certificate {{ $labels.name }} in namespace {{ $labels.namespace }} has expired.
            - alert: CertificateNotReady
              expr: certmanager_certificate_ready_status{condition="Ready",status="false"} == 1
              for: 10m
              labels:
                severity: critical
              annotations:
                summary: Certificate {{ $labels.name }} is not ready
                description: Certificate {{ $labels.name }} in namespace {{ $labels.namespace }} is not ready.
            - alert: IssuerNotReady
              expr: certmanager_issuer_ready_status{condition="Ready",status="false"} == 1
              for: 10m
              labels:
                severity: critical
              annotations:
                summary: Issuer {{ $labels.name }} is not ready
                description: Issuer {{ $labels.name }} in namespace {{ $labels.namespace }} is not ready.
            - alert: ClusterIssuerNotReady
              expr: certmanager_clusterissuer_ready_status{condition="Ready",status="false"} == 1
              for: 10m
              labels:
                severity: critical
              annotations:
                summary: ClusterIssuer {{ $labels.name }} is not ready
                description: ClusterIssuer {{ $labels.name }} is not ready.
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1wp7n5rlrjdqjx7hpkfv35ejwauuggyncl0cu4zllcq59a696sudqnucqfe
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0NXFXVjRjY0dLOUJCazJ3
            UTF5L05GejM5WFdOQm5YOFZlMTJmN1NRQ21nCjhyY0JvZFRndXpNQXhZUXZXSU1l
            Q044akJRWXM0UERQWVlpU2plb3kvME0KLS0tIGc3aDg1Z2lYaDNKUE1oYVdYTmV0
            VHYrZFI1ZGFvRnIvemlKNkM5TFJWU2sKwBoB3i+y4XIPPjY3d+ngcXKe572rXTDd
            O5QPP4xUyliksVe+FWhBpE5QtGJxAYy4CV/gpW/seTt7T1gUOnKkcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-09-15T19:05:12Z"
    mac: ENC[AES256_GCM,data:Tv0gLhZ/GKKf/wP++0/PJGs+dtWBidqOKxkhYErvWd1EcbW9e63RDxv9QDb/p0C4ipS4m67vX2kiujextxN/ZfQ8+QoU8Bexzlhk92hJVe1crK2dL2NOswQLQtTZROfPp7KFR0PD9Hshs8XywYtKWWlzHA2O2oocw8ahHnZ+tS4=,iv:tLZx91+9WP+oZ9nalIxV5ppRxR1Gt8rUm0wax+w92z0=,tag:yd5vVNEr0vjtQxy+u5+yKw==,type:str]
    pgp: []
    encrypted_regex: ^(SOPS_AGE_KEY|.*password.*|.*PASSWORD.*|.*Secret.*|email|.*USERNAME.*|MIKROTIK_BASEURL|access-token)$
    version: 3.7.1
